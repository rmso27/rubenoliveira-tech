{"version":3,"sources":["../../src/test/testHook.ts"],"sourcesContent":["import path from 'node:path'\nimport {fileURLToPath} from 'node:url'\n\nimport {Command, Config} from '@oclif/core'\nimport {type Hook, type Hooks} from '@oclif/core/hooks'\n\nimport {captureOutput} from './captureOutput.js'\n\ninterface Options {\n  Command?: Command.Loadable\n  context?: Hook.Context\n}\n\nexport async function testHook<T extends keyof Hooks>(hook: Hook<T>, options?: Options) {\n  const config = await Config.load({\n    root: path.resolve(fileURLToPath(import.meta.url), '../../../../cli'),\n  })\n\n  const contextDefault = {\n    config,\n    debug: console.log,\n    error: console.error,\n    exit: process.exit,\n    log: console.log,\n    warn: console.warn,\n  }\n\n  const {Command, context = contextDefault} = options ?? {}\n\n  const commandInstancePromise = () =>\n    hook.call(context, {\n      argv: [],\n      Command,\n      config,\n      context,\n    })\n\n  return captureOutput(commandInstancePromise)\n}\n"],"names":["path","fileURLToPath","Config","captureOutput","testHook","hook","options","config","load","root","resolve","url","contextDefault","debug","console","log","error","exit","process","warn","Command","context","commandInstancePromise","call","argv"],"mappings":"AAAA,OAAOA,UAAU,YAAW;AAC5B,SAAQC,aAAa,QAAO,WAAU;AAEtC,SAAiBC,MAAM,QAAO,cAAa;AAG3C,SAAQC,aAAa,QAAO,qBAAoB;AAOhD,OAAO,eAAeC,SAAgCC,IAAa,EAAEC,OAAiB;IACpF,MAAMC,SAAS,MAAML,OAAOM,IAAI,CAAC;QAC/BC,MAAMT,KAAKU,OAAO,CAACT,cAAc,YAAYU,GAAG,GAAG;IACrD;IAEA,MAAMC,iBAAiB;QACrBL;QACAM,OAAOC,QAAQC,GAAG;QAClBC,OAAOF,QAAQE,KAAK;QACpBC,MAAMC,QAAQD,IAAI;QAClBF,KAAKD,QAAQC,GAAG;QAChBI,MAAML,QAAQK,IAAI;IACpB;IAEA,MAAM,EAACC,OAAO,EAAEC,UAAUT,cAAc,EAAC,GAAGN,WAAW,CAAC;IAExD,MAAMgB,yBAAyB,IAC7BjB,KAAKkB,IAAI,CAACF,SAAS;YACjBG,MAAM,EAAE;YACRJ;YACAb;YACAc;QACF;IAEF,OAAOlB,cAAcmB;AACvB"}