{"version":3,"sources":["../../src/test/mockApi.ts"],"sourcesContent":["import nock from 'nock'\n\n/**\n * @internal\n */\nexport interface MockApiOptions {\n  /**\n   * Uri to mock\n   */\n  uri: string\n\n  /**\n   * Api host to mock, defaults to `https://api.sanity.io`\n   */\n  apiHost?: string\n\n  /**\n   * Api version to mock, defaults to `v2025-05-14`\n   */\n  apiVersion?: string\n\n  /**\n   * HTTP method to mock\n   *\n   * Defaults to 'get'\n   */\n  method?: 'delete' | 'get' | 'patch' | 'post' | 'put'\n\n  /**\n   * Query parameters to mock\n   */\n  query?: Record<string, string>\n}\n\n/**\n * Mocks the API calls, add some defaults so it doesn't cause too much friction\n *\n * @internal\n */\nexport function mockApi({\n  apiHost = 'https://api.sanity.io',\n  apiVersion = 'v2025-05-14',\n  method = 'get',\n  query = {},\n  uri,\n}: MockApiOptions) {\n  const version = apiVersion.startsWith('v') ? apiVersion : `v${apiVersion}`\n\n  return nock(apiHost)\n    [method](`/${version}${uri}`)\n    .query({tag: 'sanity.cli', ...query})\n}\n"],"names":["nock","mockApi","apiHost","apiVersion","method","query","uri","version","startsWith","tag"],"mappings":"AAAA,OAAOA,UAAU,OAAM;AAkCvB;;;;CAIC,GACD,OAAO,SAASC,QAAQ,EACtBC,UAAU,uBAAuB,EACjCC,aAAa,aAAa,EAC1BC,SAAS,KAAK,EACdC,QAAQ,CAAC,CAAC,EACVC,GAAG,EACY;IACf,MAAMC,UAAUJ,WAAWK,UAAU,CAAC,OAAOL,aAAa,CAAC,CAAC,EAAEA,YAAY;IAE1E,OAAOH,KAAKE,QACV,CAACE,OAAO,CAAC,CAAC,CAAC,EAAEG,UAAUD,KAAK,EAC3BD,KAAK,CAAC;QAACI,KAAK;QAAc,GAAGJ,KAAK;IAAA;AACvC"}